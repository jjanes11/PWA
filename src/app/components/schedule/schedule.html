<div class="schedule-container">
  <div class="schedule-header">
    <h2>Weekly Schedule</h2>
    <div class="week-navigation">
      <button (click)="previousWeek()" class="week-nav-btn">â€¹</button>
      <span class="week-label">{{ weekLabel() }}</span>
      <button (click)="nextWeek()" class="week-nav-btn">â€º</button>
    </div>
  </div>

  <!-- Desktop: Grid View -->
  <div class="schedule-grid desktop-only">
    <div class="time-header"></div>
    @for (day of weekSchedule(); track day.day) {
      <div class="day-header">
        <div class="day-name">{{ day.day }}</div>
        <div class="day-date">{{ formatDate(day.date) }}</div>
      </div>
    }
    
    @for (time of timeSlots(); track time) {
      <div class="time-label">{{ time }}</div>
      @for (day of weekSchedule(); track day.day) {
        <div 
          class="time-slot"
          [class.has-workout]="getSlot(day, time)?.workoutId"
          [class.available]="!getSlot(day, time)?.workoutId"
          (click)="toggleSlot(day, time)"
        >
          @if (getSlot(day, time)?.workoutId) {
            <div class="workout-indicator">
              <span class="workout-emoji">ðŸ’ª</span>
              <span class="workout-name">{{ getSlot(day, time)?.workoutName }}</span>
            </div>
          } @else {
            <div class="empty-slot">
              <span class="add-icon">+</span>
            </div>
          }
        </div>
      }
    }
  </div>

  <!-- Mobile: Card View -->
  <div class="schedule-cards mobile-only">
    @for (day of weekSchedule(); track day.day) {
      <div class="day-card">
        <div class="day-card-header">
          <h3>{{ day.day }}</h3>
          <span class="card-date">{{ formatDate(day.date) }}</span>
        </div>
        <div class="day-slots">
          @for (slot of day.slots; track slot.time) {
            <div 
              class="slot-item"
              [class.has-workout]="slot.workoutId"
              (click)="toggleSlot(day, slot.time)"
            >
              <span class="slot-time">{{ slot.time }}</span>
              @if (slot.workoutId) {
                <span class="slot-workout">ðŸ’ª {{ slot.workoutName }}</span>
              } @else {
                <span class="slot-empty">Available</span>
              }
            </div>
          }
        </div>
      </div>
    }
  </div>

  <!-- Quick Schedule Modal -->
  @if (showScheduleModal()) {
    <div class="modal-overlay" (click)="closeScheduleModal()">
      <div class="schedule-modal" (click)="$event.stopPropagation()">
        <h3>Schedule Workout</h3>
        <p>{{ selectedDay() }} at {{ selectedTime() }}</p>
        
        <div class="workout-options">
          <input 
            type="text" 
            placeholder="Enter workout name..."
            [(ngModel)]="newWorkoutName"
            class="workout-input"
            (keyup.enter)="saveScheduledWorkout()"
          >
          
          <div class="preset-workouts">
            <div class="preset-label">Quick options:</div>
            @for (preset of presetWorkouts(); track preset) {
              <button 
                class="preset-btn"
                (click)="selectPreset(preset)"
              >
                {{ preset }}
              </button>
            }
          </div>
        </div>
        
        <div class="modal-actions">
          <button class="cancel-btn" (click)="closeScheduleModal()">Cancel</button>
          <button 
            class="save-btn" 
            (click)="saveScheduledWorkout()"
            [disabled]="!newWorkoutName.trim()"
          >
            Schedule
          </button>
        </div>
      </div>
    </div>
  }
</div>
