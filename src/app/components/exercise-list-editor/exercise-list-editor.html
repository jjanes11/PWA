<div class="editor-container" [class.editor-container--loading]="loading">
  <header class="editor-header">
    @if (leftButton) {
      <button
        type="button"
        class="{{ buttonClasses(leftButton) }}"
        [attr.aria-label]="leftButton.ariaLabel || leftButton.label"
        [disabled]="leftButton.disabled"
        (click)="onLeftClick()"
        >
        @if (leftButton.iconPath) {
          <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
            <path [attr.d]="leftButton.iconPath" />
          </svg>
        }
        @if (leftButton.label) {
          <span>{{ leftButton.label }}</span>
        }
      </button>
    }

    @if (title || subtitle) {
      <div class="editor-header__titles">
        @if (title) {
          <h1 class="editor-header__title">{{ title }}</h1>
        }
        @if (subtitle) {
          <p class="editor-header__subtitle">{{ subtitle }}</p>
        }
      </div>
    }

    @if (rightButton) {
      <button
        type="button"
        class="{{ buttonClasses(rightButton) }}"
        [disabled]="rightButton.disabled"
        (click)="onRightClick()"
        >
        <span>{{ rightButton.label }}</span>
      </button>
    }
  </header>

  <main class="editor-main">
    <section class="editor-before-list">
      <ng-content select="[editor-before-list]"></ng-content>
    </section>

    @if (hasExercises()) {
      <section class="editor-exercises">
        @for (exercise of workout?.exercises; track trackExercise($index, exercise)) {
          @if (enableReorder) {
            <div
              class="editor-exercise-card"
              [class.editor-exercise-card--drag-over]="isDragOver(exercise.id)"
              [class.editor-exercise-card--dragging]="isDragging(exercise.id)"
              [attr.draggable]="enableReorder ? true : null"
              appDraggable
              [dragItemId]="exercise.id"
              [draggedId]="resolvedDraggedId"
              [dragOverId]="resolvedDragOverId"
              (dragReorder)="exerciseReorder.emit($event)"
              >
              <app-exercise-card
                [exercise]="exercise"
                [mode]="exerciseMode"
                [showMenu]="showMenu"
                [showAddSetButton]="showAddSetButton"
                [showCompleteColumn]="showCompleteColumn"
                [menuItems]="menuItems"
                (action)="exerciseAction.emit($event)"
              ></app-exercise-card>
            </div>
          } @else {
            <div class="editor-exercise-card">
              <app-exercise-card
                [exercise]="exercise"
                [mode]="exerciseMode"
                [showMenu]="showMenu"
                [showAddSetButton]="showAddSetButton"
                [showCompleteColumn]="showCompleteColumn"
                [menuItems]="menuItems"
                (action)="exerciseAction.emit($event)"
              ></app-exercise-card>
            </div>
          }
        }
      </section>
    } @else {
      @if (!loading) {
        <section class="editor-empty">
          @if (emptyState?.iconPath) {
            <div class="editor-empty__icon">
              <svg width="64" height="64" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                <path [attr.d]="emptyState?.iconPath" />
              </svg>
            </div>
          }
          @if (emptyState?.title) {
            <h2 class="editor-empty__title">{{ emptyState?.title }}</h2>
          }
          @if (emptyState?.message) {
            <p class="editor-empty__message">{{ emptyState?.message }}</p>
          }
        </section>
      }
    }


    <section class="editor-after-list">
      <ng-content select="[editor-after-list]"></ng-content>
    </section>
  </main>

  @if (bottomPrimary || bottomSecondary) {
    <footer class="editor-footer">
      @if (bottomPrimary) {
        <button
          type="button"
          class="{{ buttonClasses(bottomPrimary) }}"
          [disabled]="bottomPrimary.disabled"
          (click)="triggerBottomPrimary()"
          >
          {{ bottomPrimary.label }}
        </button>
      }
      @if (bottomSecondary) {
        <button
          type="button"
          class="{{ buttonClasses(bottomSecondary) }}"
          [disabled]="bottomSecondary.disabled"
          (click)="triggerBottomSecondary()"
          >
          {{ bottomSecondary.label }}
        </button>
      }
    </footer>
  }
</div>
